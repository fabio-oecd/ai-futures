{"mappings":"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","sources":["src/index.js"],"sourcesContent":["import * as d3 from \"d3\";\nimport './index.css';\n\nfunction createGraphFromData(selector, data) {\n    const bubbleData = data.bubbleData || [];\n    const linksData = data.linksData || [];\n\n    const moveLastLevelBubbleTextToTooltip = data.options.moveLastLevelBubbleTextToTooltip || false;\n    const disableLabelBoxesOnLinks = data.options.disableLabelBoxesOnLinks || false;\n\n\n    const rootLevelZoomThreshold = 1;\n\n    const bubbleTextMargin = 2;\n\n    const scaleFactor = 0.6;\n\n    const initialFontSize = 25 * scaleFactor;\n\n    const container = d3.select(selector)\n        .append(\"div\")\n        .attr(\"class\", \"infoblig\");\n\n    const containerRect = container\n        .node()\n        .getBoundingClientRect();\n\n    const width = containerRect.width;\n    const height = containerRect.height;\n\n    const offsetX = width * (1 - scaleFactor) / 2;\n    const offsetY = height * (1 - scaleFactor) / 2;\n\n    const pack = d3\n        .pack()\n        .size([width * scaleFactor, height * scaleFactor])\n        .padding(30);\n\n    const hierarchyData = d3.hierarchy(bubbleData)\n        .sum(d => d.value)\n        .sort((a, b) => b.value - a.value);\n\n    const maxDepth = hierarchyData.height;\n\n    const sidebar = container.append(\"div\")\n        .attr(\"id\", \"sidebar\")\n        .attr(\"class\", \"sidebar\")\n\n    const sidebarData = sidebar.append(\"p\");\n\n    const sidebarButton = sidebar.append(\"button\")\n        .attr(\"class\", \"circularButton\")\n        .on(\"click\", function() {\n            if(sidebar.classed(\"active\")) {\n                sidebar.classed(\"active\", false)\n                sidebarButton.html(\"+\")\n            }\n            else {\n                sidebar.classed(\"active\", true)\n                sidebarButton.html(\"-\")\n            }\n        })\n        .html(\"+\")\n\n    container.append(\"div\")\n        .attr(\"class\", \"zoomSliderBox\")\n        .append(\"label\")\n            .html(\"Niveau de detail<br/>\")\n            .append(\"input\")\n                .attr(\"type\", \"range\")\n                .attr(\"id\", \"zoomLevelSlider\")\n                .attr(\"min\", 2)\n                .attr(\"max\", Math.pow(3, maxDepth - 1))\n                .attr(\"value\", 1)\n\n    const svg = container.append(\"svg\")\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .append(\"g\")\n        .attr(\"transform\", `translate(${offsetX}, ${offsetY})`);\n\n    const nodes = pack(hierarchyData).descendants();\n\n    const tooltip = container.append(\"div\")\n        .attr(\"class\", \"tooltip\")\n        .style(\"opacity\", 0);\n\n    const bubbles = svg\n        .selectAll(\"g\")\n        .data(nodes)\n        .join(\"g\")\n        .attr(\"transform\", d => `translate(${d.x},${d.y})`);\n\n    bubbles.append(\"circle\")\n        .attr(\"r\", d => d.r)\n        .attr(\"fill\", d => d.data.color ? d.data.color : \"#d3d3d3\")\n        .attr(\"stroke\", d => d.data.colorStroke ? d.data.colorStroke : \"#000\")\n        .attr(\"stroke-width\", 1)\n        .on(\"mouseover\", function (event, d) {\n            d3.select(this).classed(\"hovered\", true);\n            if (!d.children && moveLastLevelBubbleTextToTooltip) {\n                tooltip.transition()\n                    .duration(200)\n                    .style(\"opacity\", .9);\n                tooltip.html(d.data.name)\n                    // eslint-disable-next-line no-restricted-globals\n                    .style(\"left\", (event.pageX) + \"px\")\n                    // eslint-disable-next-line no-restricted-globals\n                    .style(\"top\", (event.pageY - 28) + \"px\");\n            }\n        })\n        .on(\"mouseout\", function () {\n            d3.select(this).classed(\"hovered\", false);\n            tooltip.transition()\n                .duration(500)\n                .style(\"opacity\", 0);\n        });\n\n    const arcPath = d => {\n        const radius = d.r + bubbleTextMargin;\n        return `M ${-radius}, 0 A ${radius}, ${radius} 0 0, 1 ${radius}, 0`;\n    };\n\n    bubbles.append(\"path\")\n        .attr(\"id\", (d, i) => `path-${i}`)\n        .attr(\"d\", d => d.children ? arcPath(d) : null)\n        .style(\"display\", \"none\");\n\n\n    bubbles.append(\"text\")\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"alignment-baseline\", \"middle\")\n        .style(\"font-size\", initialFontSize + \"px\")\n        .each(function (d) {\n            if (!d.children && moveLastLevelBubbleTextToTooltip) {\n                // d3.select(this)\n                //     .text(d.data.name)\n                //     .style(\"fill\", d.data.colorStroke ? d.data.colorStroke : /*d.data.color? d.data.color :*/ \"#000\");\n            } else {\n                d3.select(this)\n                    .append(\"textPath\")\n                    .attr(\"href\", (d, i) => `#path-${i}`)\n                    .attr(\"startOffset\", \"50%\")\n                    .text(d.data.name)\n                    .style(\"fill\", d.data.colorStroke ? d.data.colorStroke : /*d.data.color? d.data.color :*/ \"#000\");\n            }\n        });\n\n    const link = svg\n        .selectAll(\"line\")\n        .data(linksData)\n        .join(\"line\")\n        .attr(\"stroke\", \"rgba(0,0,0,0.49)\")\n        .attr(\"stroke-width\", 1);\n\n    const rectanglesData = linksData.map(d => {\n        const source = nodes.find(n => n.data.id === d.source);\n        const target = nodes.find(n => n.data.id === d.target);\n        const angle = Math.atan2(target.y - source.y, target.x - source.x);\n        return [\n            {\n                x: source.x + source.r * Math.cos(angle),\n                y: source.y + source.r * Math.sin(angle),\n                //color: d.color\n                color: '#fff'\n            },\n            {\n                x: target.x - target.r * Math.cos(angle),\n                y: target.y - target.r * Math.sin(angle),\n                color: '#fff'\n            }\n        ];\n    }).flat();\n\n    const positionLink = () => {\n        link.attr(\"x1\", d => {\n            const source = nodes.find(n => n.data.id === d.source);\n            const target = nodes.find(n => n.data.id === d.target);\n            const angle = Math.atan2(target.y - source.y, target.x - source.x);\n            return source.x + source.r * Math.cos(angle);\n        }).attr(\"y1\", d => {\n            const source = nodes.find(n => n.data.id === d.source);\n            const target = nodes.find(n => n.data.id === d.target);\n            const angle = Math.atan2(target.y - source.y, target.x - source.x);\n            return source.y + source.r * Math.sin(angle);\n        }).attr(\"x2\", d => {\n            const source = nodes.find(n => n.data.id === d.source);\n            const target = nodes.find(n => n.data.id === d.target);\n            const angle = Math.atan2(source.y - target.y, source.x - target.x);\n            return target.x + target.r * Math.cos(angle);\n        }).attr(\"y2\", d => {\n            const source = nodes.find(n => n.data.id === d.source);\n            const target = nodes.find(n => n.data.id === d.target);\n            const angle = Math.atan2(source.y - target.y, source.x - target.x);\n            return target.y + target.r * Math.sin(angle);\n        });\n    };\n\n    positionLink();\n\n    const rectangleGroups = svg\n        .selectAll(\".rectangle-group\")\n        .data(rectanglesData)\n        .join(\"g\")\n        .attr(\"class\", \"rectangle-group\");\n\n    if(!disableLabelBoxesOnLinks) {\n        rectangleGroups.each(function (d, i) {\n            const textElement = d3.select(this)\n                .append(\"text\")\n                .attr(\"class\", \"invisible-text\")\n                .attr(\"font-size\", \".5rem\")\n                .text(() => {\n                    const linkData = linksData[Math.floor(i / 2)];\n                    const node = nodes.find(n => n.data.id === (i % 2 === 0 ? linkData.target : linkData.source));\n                    return node.parent.data.name;\n                });\n\n            const bbox = textElement.node().getBBox();\n            d.width = bbox.width + 4;\n            d.height = bbox.height + 4;\n\n            d3.select(this)\n                .append(\"rect\")\n                .attr(\"width\", d.width)\n                .attr(\"height\", d.height)\n                .attr(\"fill\", d.color)\n                .attr(\"stroke\", \"#000\")\n                .attr(\"stroke-width\", 1);\n\n            d3.select(this)\n                .append(\"text\")\n                .attr(\"x\", d.width / 2)\n                .attr(\"y\", d.height / 2)\n                .attr(\"dy\", \"0.3em\")\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"font-size\", \".5rem\")\n                .text(() => {\n                    const linkData = linksData[Math.floor(i / 2)];\n                    const node = nodes.find(n => n.data.id === (i % 2 === 0 ? linkData.target : linkData.source));\n                    return node.parent.data.name;\n                });\n\n            textElement.remove();\n        });\n    }\n\n    const updatePositions = () => {\n        positionLink();\n        rectangleGroups.attr(\"transform\", (d, i) => {\n            const linkData = linksData[Math.floor(i / 2)];\n            const source = nodes.find(n => n.data.id === linkData.source);\n            const target = nodes.find(n => n.data.id === linkData.target);\n            const angle = Math.atan2(target.y - source.y, target.x - source.x);\n            const node = nodes.find(n => n.data.id === (i % 2 === 0 ? linkData.source : linkData.target));\n            const xOffset = (i % 2 === 0 ? node.r : -node.r) * Math.cos(angle);\n            const yOffset = (i % 2 === 0 ? node.r : -node.r) * Math.sin(angle);\n            return `translate(${node.x + xOffset - d.width / 2}, ${node.y + yOffset - d.height / 2})`;\n        });\n    };\n\n    function isElementInViewport(el) {\n        const rect = el.getBoundingClientRect();\n        return (\n            rect.top >= 0 &&\n            rect.left >= 0 &&\n            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n            rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n        );\n    }\n\n\n    const updateBubbleVisibility = (zoomScale) => {\n        if(d3.select(\"#zoomLevelSlider\").property(\"value\") > zoomScale)\n            zoomScale = d3.select(\"#zoomLevelSlider\").property(\"value\");\n        bubbles.style(\"display\", (d) => {\n            if (d.depth === 0) {\n                return \"none\";\n            } else if (zoomScale >= Math.pow(3, d.depth - 1)) {\n                return null;\n            }\n            return \"none\";\n        });\n        link.style(\"display\", (d) => {\n            const sourceNode = nodes.find(n => n.data.id === d.source);\n            const targetNode = nodes.find(n => n.data.id === d.target);\n            const sourceBubble = bubbles.filter(b => b === sourceNode).node();\n            const targetBubble = bubbles.filter(b => b === targetNode).node();\n            const sourceVisible = window.getComputedStyle(sourceBubble).display !== \"none\";\n            const targetVisible = window.getComputedStyle(targetBubble).display !== \"none\";\n            return sourceVisible && targetVisible ? null : \"none\";\n        });\n        rectangleGroups.style(\"display\", (d, i) => {\n            const linkData = linksData[Math.floor(i / 2)];\n            const sourceNode = nodes.find(n => n.data.id === linkData.source);\n            const targetNode = nodes.find(n => n.data.id === linkData.target);\n            const sourceBubble = bubbles.filter(b => b === sourceNode).node();\n            const targetBubble = bubbles.filter(b => b === targetNode).node();\n            const sourceVisible = window.getComputedStyle(sourceBubble).display !== \"none\";\n            const targetVisible = window.getComputedStyle(targetBubble).display !== \"none\";\n            return sourceVisible && targetVisible ? null : \"none\";\n        });\n    };\n\n    const zoomed = (event) => {\n        const zoomScale = event.transform.k;\n        svg.attr('transform', event.transform);\n        updatePositions(); // Replace 'positionLink()' with 'updatePositions()'\n        updateBubbleVisibility(zoomScale);\n        bubbles.select(\"text\")\n            .style(\"font-size\", (initialFontSize / zoomScale) + \"px\");\n        bubbles.select(\"textPath\")\n            .attr(\"href\", (d, i) => d.children || !moveLastLevelBubbleTextToTooltip ? `#path-${i}` : null);\n        bubbles.select(\"path\")\n            .attr(\"d\", d => d.children || !moveLastLevelBubbleTextToTooltip ? arcPath(d) : null);\n    };\n\n    const zoom = d3.zoom()\n        // .scaleExtent([1, maxDepth * 10])\n        .scaleExtent([1, Math.pow(3, maxDepth)]) // Math.pow(3, maxDepth - 1)\n        .on('zoom', zoomed);\n\n    d3.select(\"svg\")\n        .call(zoom)\n        .call(zoom.translateBy, offsetX, offsetY);\n\n    const zoomToBubble = (node) => {\n        let scale;\n        if (node.depth >= 1) {\n            scale = Math.pow(3, node.depth) / scaleFactor;\n        } else {\n            return;\n        }\n        const translateX = (width / 2) - (scale * node.x);\n        const translateY = (height / 2) - (scale * node.y);\n        const transform = d3.zoomIdentity.translate(translateX, translateY).scale(scale);\n        const customEvent = new CustomEvent(\"zoom\");\n        customEvent.transform = transform;\n        zoomed(customEvent);\n        d3.select(\"svg\")\n            .transition()\n            .duration(750)\n            .call(zoom.transform, transform);\n    };\n    bubbles.on(\"click\", (event, d) => {\n        if (d.depth === 0) return;\n        zoomToBubble(d);\n        if (d.data.sidebarData) {\n            sidebar.classed(\"active\", true)\n            sidebarButton.html(\"-\")\n            sidebarData.html(d.data.sidebarData ? d.data.sidebarData : null);\n        }\n        else {\n            sidebar.classed(\"active\", false)\n            sidebarButton.html(\"+\")\n            sidebarData.text(null);\n\n        }\n    });\n\n    d3.select(\".infoblig #zoomLevelSlider\").on(\"input\", function() {\n        updateBubbleVisibility(this.value);\n    });\n\n    updateBubbleVisibility(rootLevelZoomThreshold)\n}\n\nmodule.exports = {\n    createGraphFromData\n}"],"names":[],"version":3,"file":"index.js.map"}